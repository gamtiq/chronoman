{"version":3,"sources":["../chronoman.js"],"names":["Array","isArray","value","Object","prototype","toString","call","Timer","initValue","that","_executeTime","_onTimeoutEnd","_timeoutId","execute","setProperties","_period","getPeriod","setPeriod","period","getPeriodValue","execQty","getExecutionQty","length","_recurrent","isRecurrent","setRecurrent","bRecurrent","_repeatQty","getRepeatQty","setRepeatQty","nQty","_repeatTest","getRepeatTest","setRepeatTest","test","_data","getData","setData","data","_executionQty","setExecutionQty","_setTimeout","nTimeout","setTimeout","_clearTimeout","clearTimeout","_startTime","getStartTime","_stopTime","getStopTime","getExecuteTime","_active","isActive","setActive","bActive","Date","getTime","start","property","propType","stop","_action","getAction","setAction","action","_passToAction","isPassToAction","setPassToAction","bPass","propMap","recurrent","repeatQty","repeatTest","active","passToAction","actionResult","onExecute","onExecuteResult","bPassToAction","push","dispose","startTime","stopTime","executeTime","nL","execTime","nI","join"],"mappings":"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","file":"chronoman.common.js","sourcesContent":["/**\n * @module chronoman\n * \n * @author Denis Sikuler\n */\n\n\nif (! Array.isArray) {\n    Array.isArray = function(value) {\n        return Object.prototype.toString.call(value) === \"[object Array]\";\n    };\n}\n\n/**\n * @callback module:chronoman~GetPeriodValue\n * @param {module:chronoman~Timer} [timer]\n * @return {Integer | Integer[]}\n */\n\n/**\n * Value determining time period in milliseconds that is used to schedule related action execution.\n *\n * @typedef {Integer | Integer[] | module:chronoman~GetPeriodValue} module:chronoman~PeriodValue\n */\n\n/**\n * Object describing action that should be executed after time period is elapsed.\n *\n * @typedef {Object} module:chronoman~ActionObject\n * @property {Function} execute\n *      Function that should be executed.\n */\n\n/**\n * Action that should be executed after time period is elapsed.\n *\n * @typedef {Function | module:chronoman~ActionObject} module:chronoman~Action\n */\n\n\n/**\n * Utility class to simplify use of timers created by setTimeout.\n * \n * @param {Object} [initValue]\n *      Specifies initial property values. Keys are property names, their values are values of corresponding properties.\n *      See {@link module:chronoman~Timer#setProperties setProperties} for details.\n * @constructor\n * @see {@link module:chronoman~Timer#setProperties setProperties}\n */\nvar Timer = function Timer(initValue) {\n    \n    var that = this;\n    \n    this._executeTime = [];\n\n    /**\n     * Handle timeout's end.\n     *\n     * @instance\n     * @method\n     * @protected\n     * @see {@link module:chronoman~Timer#_timeoutId _timeoutId}\n     * @see {@link module:chronoman~Timer#execute execute}\n     */\n    this._onTimeoutEnd = function() {\n        that._timeoutId = null;\n        that.execute();\n    };\n\n    if (initValue && typeof initValue === \"object\") {\n        this.setProperties(initValue);\n    }\n};\n\n\n/**\n * Time period in milliseconds, array of periods or function that returns period or array of periods.\n * A related action will be executed when the period is elapsed.\n * <br>\n * When array of periods is set the used period is selected in the following way:\n * first array item (with index 0) specifies period before first action's execution,\n * second array item (with index 1) specifies period before second action's execution,\n * and so on.\n * When quantity of action executions is more than array's length\n * the last item of array is used as period for subsequent executions.\n * <br>\n * When function is set its returned value is used to determine next period.\n * The timer instance to which the function is associated will be passed as function's parameter.\n * When function returns an array of periods the array is used to select period before next execution\n * according to rules described above.\n *\n * @protected\n * @type {module:chronoman~PeriodValue}\n * @see {@link module:chronoman~Timer#execute execute}\n * @see {@link module:chronoman~Timer#setActive setActive}\n */\nTimer.prototype._period = null;\n\n/**\n * Return value determining time period that is used to schedule related action execution.\n *\n * @return {module:chronoman~PeriodValue}\n *      Value determining time period.\n * @method\n * @see {@link module:chronoman~Timer#_period _period}\n */\nTimer.prototype.getPeriod = function() {\n    return this._period;\n};\n\n/**\n * Set value determining time period that is used to schedule related action execution.\n *\n * @param {module:chronoman~PeriodValue} period\n *      Value determining time period.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_period _period}\n */\nTimer.prototype.setPeriod = function(period) {\n    this._period = period;\n    return this;\n};\n\n/**\n * Return time period that will be used to schedule related action execution.\n *\n * @return {Integer}\n *      Time period in milliseconds.\n * @method\n * @see {@link module:chronoman~Timer#_period _period}\n * @see {@link module:chronoman~Timer#getPeriod getPeriod}\n * @see {@link module:chronoman~Timer#getExecutionQty getExecutionQty}\n */\nTimer.prototype.getPeriodValue = function() {\n    var execQty;\n    var period = this.getPeriod();\n    if (typeof period === \"function\") {\n        period = period(this);\n    }\n    if (Array.isArray(period)) {\n        execQty = this.getExecutionQty();\n        period = period[ execQty < period.length ? execQty : period.length - 1 ];\n    }\n    return period;\n};\n\n/**\n * Indicates whether related action should be executed repeatedly.\n * \n * @protected\n * @type {Boolean}\n * @see {@link module:chronoman~Timer#execute execute}\n * @see {@link module:chronoman~Timer#setActive setActive}\n */\nTimer.prototype._recurrent = false;\n\n/**\n * Test whether related action should be executed repeatedly.\n *\n * @return {Boolean}\n *      <code>true</code>, if related action should be executed repeatedly, otherwise <code>false</code>.\n * @method\n * @see {@link module:chronoman~Timer#_recurrent _recurrent}\n */\nTimer.prototype.isRecurrent = function() {\n    return this._recurrent;\n};\n\n/**\n * Set or cancel repeating of related action execution.\n *\n * @param {Boolean} bRecurrent\n *      <code>true</code>, if action should be executed repeatedly, <code>false</code>, if action repeating should be off.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_recurrent _recurrent}\n */\nTimer.prototype.setRecurrent = function(bRecurrent) {\n    this._recurrent = bRecurrent;\n    return this;\n};\n\n/**\n * Specifies how many times related action should be repeated after first execution.\n *\n * @protected\n * @type {Integer}\n * @see {@link module:chronoman~Timer#execute execute}\n * @see {@link module:chronoman~Timer#setActive setActive}\n */\nTimer.prototype._repeatQty = 0;\n\n/**\n * Return the value that indicates how many times related action should be repeated after first execution.\n *\n * @return {Integer}\n *      Value that indicates how many times related action should be repeated after first execution.\n * @method\n * @see {@link module:chronoman~Timer#_repeatQty _repeatQty}\n */\nTimer.prototype.getRepeatQty = function() {\n    return this._repeatQty;\n};\n\n/**\n * Set how many times related action should be repeated after first execution.\n *\n * @param {Integer} nQty\n *      Value that indicates how many times related action should be repeated after first execution.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_repeatQty _repeatQty}\n */\nTimer.prototype.setRepeatQty = function(nQty) {\n    this._repeatQty = nQty;\n    return this;\n};\n\n/**\n * Specifies function that should be called after action execution to determine\n * whether execution should be repeated.\n * If the function returns a true value or non-negative number it means that execution will be repeated.\n * When the function returns non-negative number this number will be used\n * as time period in milliseconds to schedule next action execution.\n * <br>\n * The timer instance to which the test is associated will be passed as function's parameter.\n *\n * @protected\n * @type {Function}\n * @see {@link module:chronoman~Timer#execute execute}\n * @see {@link module:chronoman~Timer#setActive setActive}\n */\nTimer.prototype._repeatTest = null;\n\n/**\n * Return the function that is used to determine whether action execution should be repeated.\n *\n * @return {Function}\n *      Function that is used to determine whether action execution should be repeated.\n * @method\n * @see {@link module:chronoman~Timer#_repeatTest _repeatTest}\n */\nTimer.prototype.getRepeatTest = function() {\n    return this._repeatTest;\n};\n\n/**\n * Set the function that should be used to determine whether action execution should be repeated.\n *\n * @param {Function} test\n *      Function that should be used to determine whether action execution should be repeated.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_repeatTest _repeatTest}\n */\nTimer.prototype.setRepeatTest = function(test) {\n    this._repeatTest = test;\n    return this;\n};\n\n/**\n * Auxiliary data associated with the timer instance.\n *\n * @protected\n * @type {*}\n */\nTimer.prototype._data = null;\n\n/**\n * Return auxiliary data associated with the timer instance.\n *\n * @return {*}\n *      Auxiliary data associated with the timer instance.\n * @method\n * @see {@link module:chronoman~Timer#_data _data}\n */\nTimer.prototype.getData = function() {\n    return this._data;\n};\n\n/**\n * Set auxiliary data associated with the timer instance.\n *\n * @param {*} data\n *      Auxiliary data associated with the timer instance.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_data _data}\n */\nTimer.prototype.setData = function(data) {\n    this._data = data;\n    return this;\n};\n\n/**\n * Specifies how many times action was executed.\n *\n * @protected\n * @type {Integer}\n * @see {@link module:chronoman~Timer#execute execute}\n * @see {@link module:chronoman~Timer#setActive setActive}\n */\nTimer.prototype._executionQty = 0;\n\n/**\n * Return the value that indicates how many times action was executed.\n *\n * @return {Integer}\n *      Value that indicates how many times action was executed.\n * @method\n * @see {@link module:chronoman~Timer#_executionQty _executionQty}\n */\nTimer.prototype.getExecutionQty = function() {\n    return this._executionQty;\n};\n\n/**\n * Set the value that indicates how many times action was executed.\n *\n * @param {Integer} nQty\n *      Value that indicates how many times action was executed.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_executionQty _executionQty}\n */\nTimer.prototype.setExecutionQty = function(nQty) {\n    this._executionQty = nQty > 0 ? nQty : 0;\n    return this;\n};\n\n/**\n * Timer id.\n * \n * @protected\n * @type {Integer}\n * @see {@link module:chronoman~Timer#_clearTimeout _clearTimeout}\n * @see {@link module:chronoman~Timer#_setTimeout _setTimeout}\n */\nTimer.prototype._timeoutId = null;\n\n/**\n * Schedule related action execution.\n *\n * @param {Integer} [nTimeout]\n *      Time period in milliseconds that is used to schedule action execution.\n *      By default the current value of {@link module:chronoman~Timer#getPeriod period} property is used\n *      to determine time period.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @protected\n * @see {@link module:chronoman~Timer#_clearTimeout _clearTimeout}\n * @see {@link module:chronoman~Timer#_onTimeoutEnd _onTimeoutEnd}\n * @see {@link module:chronoman~Timer#_timeoutId _timeoutId}\n * @see {@link module:chronoman~Timer#execute execute}\n * @see {@link module:chronoman~Timer#getPeriodValue getPeriodValue}\n */\nTimer.prototype._setTimeout = function(nTimeout) {\n    \"use strict\";\n    var period;\n    if (typeof nTimeout === \"number\") {\n        period = nTimeout;\n    }\n    else {\n        period = this.getPeriodValue();\n    }\n    if (typeof period === \"number\") {\n        this._timeoutId = setTimeout(this._onTimeoutEnd, period);\n    }\n    return this;\n};\n\n/**\n * Cancel execution of scheduled action.\n *\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @protected\n * @see {@link module:chronoman~Timer#_setTimeout _setTimeout}\n * @see {@link module:chronoman~Timer#_timeoutId _timeoutId}\n */\nTimer.prototype._clearTimeout = function() {\n    \"use strict\";\n    if (this._timeoutId) {\n        clearTimeout(this._timeoutId);\n        this._timeoutId = null;\n    }\n    return this;\n};\n\n/**\n * Time when timer was set {@link module:chronoman~Timer#_active active}\n * (was {@link module:chronoman~Timer#start started}).\n * \n * @protected\n * @type {Integer}\n * @see {@link module:chronoman~Timer#setActive setActive}\n * @see {@link module:chronoman~Timer#start start}\n */\nTimer.prototype._startTime = null;\n\n/**\n * Return time when timer was set active.\n *\n * @return {Integer}\n *      Time when timer was set active.\n * @method\n * @see {@link module:chronoman~Timer#_startTime _startTime}\n */\nTimer.prototype.getStartTime = function() {\n    return this._startTime;\n};\n\n/**\n * Time when timer was set {@link module:chronoman~Timer#_active inactive}\n * (was {@link module:chronoman~Timer#start stopped}).\n * \n * @protected\n * @type {Integer}\n * @see {@link module:chronoman~Timer#setActive setActive}\n * @see {@link module:chronoman~Timer#start stop}\n */\nTimer.prototype._stopTime = null;\n\n/**\n * Return time when timer was set inactive.\n *\n * @return {Integer}\n *      Time when timer was set inactive.\n * @method\n * @see {@link module:chronoman~Timer#_stopTime _stopTime}\n */\nTimer.prototype.getStopTime = function() {\n    return this._stopTime;\n};\n\n/**\n * List that contain times when {@link module:chronoman~Timer#execute execute} was called.\n *\n * @type {Integer[]}\n * @see {@link module:chronoman~Timer#execute execute}\n */\nTimer.prototype._executeTime = null;\n\n/**\n * Return list that contain times when {@link module:chronoman~Timer#execute execute} was called.\n *\n * @return {Integer[]}\n *      List that contain times when {@link module:chronoman~Timer#execute execute} was called.\n * @method\n * @see {@link module:chronoman~Timer#_executeTime _executeTime}\n */\nTimer.prototype.getExecuteTime = function() {\n    return this._executeTime;\n};\n\n/**\n * Indicates whether timer is in use.\n * \n * @protected\n * @type {Boolean}\n * @see {@link module:chronoman~Timer#execute execute}\n */\nTimer.prototype._active = false;\n\n/**\n * Test whether timer is in use.\n *\n * @return {Boolean}\n *      <code>true</code>, if timer is in use, otherwise <code>false</code>.\n * @method\n * @see {@link module:chronoman~Timer#_active _active}\n */\nTimer.prototype.isActive = function() {\n    return this._active;\n};\n\n/**\n * Set or cancel timer usage.\n * Depending of this schedules related action execution or cancels action execution.\n * <br>\n * Consecutive calling with <code>bActive = true</code> leads to related action execution delaying.\n *\n * @param {Boolean} bActive\n *      <code>true</code> to schedule related action execution, <code>false</code> to cancel action execution.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_active _active}\n * @see {@link module:chronoman~Timer#_executionQty _executionQty}\n * @see {@link module:chronoman~Timer#execute execute}\n */\nTimer.prototype.setActive = function(bActive) {\n    \"use strict\";\n    if (bActive && ! this._active) {\n        this._executionQty = 0;\n    }\n    this._active = bActive;\n    // Consecutive calling with bActive = true leads to action execution delaying\n    this._clearTimeout();\n    if (bActive) {\n        this._executeTime.length = 0;\n        this._setTimeout();\n    }\n    this[bActive ? \"_startTime\" : \"_stopTime\"] = new Date().getTime();\n    return this;\n};\n\n/**\n * Start timer usage (make it active).\n *\n * @param {module:chronoman~PeriodValue | Object} [property]\n *      Time period in milliseconds that is used to schedule related action execution\n *      (new value for {@link module:chronoman~Timer#setPeriod period} property)\n *      or object that specifies new values for timer properties (see {@link module:chronoman~Timer#setProperties setProperties}).\n *      The current value of {@link module:chronoman~Timer#getPeriod period} property is used by default.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#setActive setActive}\n * @see {@link module:chronoman~Timer#setPeriod setPeriod}\n * @see {@link module:chronoman~Timer#setProperties setProperties}\n * @see {@link module:chronoman~Timer#stop stop}\n */\nTimer.prototype.start = function(property) {\n    \"use strict\";\n    var propType = typeof property;\n    if (propType === \"number\" || propType === \"function\" || Array.isArray(property)) {\n        this.setPeriod(property);\n    }\n    else if (property && propType === \"object\") {\n        this.setProperties(property);\n    }\n    return this.setActive(true);\n};\n\n/**\n * Stop timer usage (make it inactive).\n *\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#setActive setActive}\n * @see {@link module:chronoman~Timer#start start}\n */\nTimer.prototype.stop = function() {\n    return this.setActive(false);\n};\n\n/**\n * Related action that should be executed after time period is elapsed.\n * <br>\n * Can be a function or an object having <code>execute</code> method.\n * <br>\n * The timer instance to which the action is associated will be passed as function's/method's parameter\n * if {@link module:chronoman~Timer#setPassToAction passToAction} property is set to <code>true</code>.\n *\n * @protected\n * @type {module:chronoman~Action}\n * @see {@link module:chronoman~Timer#execute execute}\n */\nTimer.prototype._action = null;\n\n/**\n * Return value that represents action.\n *\n * @return {module:chronoman~Action}\n *      Function that represents action.\n * @method\n * @see {@link module:chronoman~Timer#_action _action}\n */\nTimer.prototype.getAction = function() {\n    return this._action;\n};\n\n/**\n * Set value which represents action that should be executed after time period is elapsed.\n *\n * @param {module:chronoman~Action} action\n *      Value that represents action.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_action _action}\n */\nTimer.prototype.setAction = function(action) {\n    this._action = action;\n    return this;\n};\n\n/**\n * Indicates whether the timer instance (<code>this</code>) should be passed into action function when the function is called.\n * \n * @protected\n * @type {Boolean}\n * @see {@link module:chronoman~Timer#execute execute}\n */\nTimer.prototype._passToAction = false;\n\n/**\n * Test whether the timer instance should be passed into action function when the function is called.\n *\n * @return {Boolean}\n *      <code>true</code>, if the timer instance should be passed, otherwise <code>false</code>.\n * @method\n * @see {@link module:chronoman~Timer#_passToAction _passToAction}\n */\nTimer.prototype.isPassToAction = function() {\n    return this._passToAction;\n};\n\n/**\n * Set or cancel passing of timer instance into action function.\n *\n * @param {Boolean} bPass\n *      <code>true</code>, if the timer instance should be passed into action function, \n *      <code>false</code>, if the instance should not be passed.\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_passToAction _passToAction}\n */\nTimer.prototype.setPassToAction = function(bPass) {\n    this._passToAction = bPass;\n    return this;\n};\n\n/**\n * Set timer properties.\n *\n * @param {Object} propMap\n *      Specifies property values. Keys are property names, their values are values of corresponding properties.\n *      The following keys (properties) can be specified:\n *      <table>\n *          <tr>\n *              <th>Name</th>\n *              <th>Type</th>\n *              <th>Description</th>\n *          </tr>\n *          <tr>\n *              <td>action</td>\n *              <td>Function</td>\n *              <td>Related action that should be executed after time period is elapsed.</td>\n *          </tr>\n *          <tr>\n *              <td>active</td>\n *              <td>Boolean</td>\n *              <td>Whether timer usage should be immediately started.</td>\n *          </tr>\n *          <tr>\n *              <td>data</td>\n *              <td>Any</td>\n *              <td>Auxiliary data associated with the timer instance.</td>\n *          </tr>\n *          <tr>\n *              <td>passToAction</td>\n *              <td>Boolean</td>\n *              <td>Whether the timer instance should be passed into action function when the function is called.</td>\n *          </tr>\n *          <tr>\n *              <td>period</td>\n *              <td>module:chronoman~PeriodValue</td>\n *              <td>Value determining time period in milliseconds that is used to schedule related action execution.</td>\n *          </tr>\n *          <tr>\n *              <td>recurrent</td>\n *              <td>Boolean</td>\n *              <td>Whether related action should be executed repeatedly.</td>\n *          </tr>\n *          <tr>\n *              <td>repeatQty</td>\n *              <td>Integer</td>\n *              <td>How many times related action should be repeated after first execution.</td>\n *          </tr>\n *          <tr>\n *              <td>repeatTest</td>\n *              <td>Function</td>\n *              <td>Function that should be used to determine whether action execution should be repeated.</td>\n *          </tr>\n *      </table>\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#setAction setAction}\n * @see {@link module:chronoman~Timer#setActive setActive}\n * @see {@link module:chronoman~Timer#setData setData}\n * @see {@link module:chronoman~Timer#setPassToAction setPassToAction}\n * @see {@link module:chronoman~Timer#setPeriod setPeriod}\n * @see {@link module:chronoman~Timer#setRecurrent setRecurrent}\n * @see {@link module:chronoman~Timer#setRepeatQty setRepeatQty}\n * @see {@link module:chronoman~Timer#setRepeatTest setRepeatTest}\n */\nTimer.prototype.setProperties = function(propMap) {\n    if (propMap && typeof propMap === \"object\") {\n        if (\"action\" in propMap) {\n            this.setAction(propMap.action);\n        }\n        if (\"period\" in propMap) {\n            this.setPeriod(propMap.period);\n        }\n        if (\"recurrent\" in propMap) {\n            this.setRecurrent(propMap.recurrent);\n        }\n        if (\"repeatQty\" in propMap) {\n            this.setRepeatQty(propMap.repeatQty);\n        }\n        if (\"repeatTest\" in propMap) {\n            this.setRepeatTest(propMap.repeatTest);\n        }\n        if (\"active\" in propMap) {\n            this.setActive(propMap.active);\n        }\n        if (\"passToAction\" in propMap) {\n            this.setPassToAction(propMap.passToAction);\n        }\n        if (\"data\" in propMap) {\n            this.setData(propMap.data);\n        }\n    }\n    return this;\n};\n\n/**\n * Result of {@link module:chronoman~Timer#_action action}'s last execution.\n *\n * @type {*}\n * @see {@link module:chronoman~Timer#_action action}\n */\nTimer.prototype.actionResult = void 0;\n\n/**\n * Function that should be executed after time period is elapsed.\n * <br>\n * The timer instance to which the function is associated will be passed as function's parameter\n * if {@link module:chronoman~Timer#setPassToAction passToAction} property is set to <code>true</code>.\n *\n * @type {Function}\n * @see {@link module:chronoman~Timer#execute execute}\n */\nTimer.prototype.onExecute = null;\n\n/**\n * Result of {@link module:chronoman~Timer#onExecute onExecute} last execution.\n *\n * @type {*}\n * @see {@link module:chronoman~Timer#onExecute onExecute}\n */\nTimer.prototype.onExecuteResult = void 0;\n\n/**\n * Execute related action (function).\n * <br>\n * The timer instance to which the action is associated will be passed as function's parameter\n * if {@link module:chronoman~Timer#setPassToAction passToAction} property is set to <code>true</code>.\n * <br>\n * Action's next execution will be scheduled when one of the following conditions is true:\n * <ul>\n * <li>timer is set as recurrent (see {@link module:chronoman~Timer#isRecurrent isRecurrent});\n * <li>specified quantity of repeats is not reached (see {@link module:chronoman~Timer#getRepeatQty getRepeatQty});\n * <li>specified repeat test is passed i.e. the test function returns true value or non-negative number (see {@link module:chronoman~Timer#getRepeatTest getRepeatTest});\n * </ul>\n *\n * @return {Object}\n *      Reference to <code>this</code> object.\n * @method\n * @see {@link module:chronoman~Timer#_active _active}\n * @see {@link module:chronoman~Timer#_executionQty _executionQty}\n * @see {@link module:chronoman~Timer#getAction getAction}\n * @see {@link module:chronoman~Timer#getRepeatQty getRepeatQty}\n * @see {@link module:chronoman~Timer#getRepeatTest getRepeatTest}\n * @see {@link module:chronoman~Timer#isActive isActive}\n * @see {@link module:chronoman~Timer#isPassToAction isPassToAction}\n * @see {@link module:chronoman~Timer#isRecurrent isRecurrent}\n * @see {@link module:chronoman~Timer#onExecute onExecute}\n */\nTimer.prototype.execute = function() {\n    \"use strict\";\n    /*jshint expr:true, laxbreak:true*/\n    var action = this.getAction(),\n        bPassToAction = this.isPassToAction(),\n        repeatTest = this.getRepeatTest(),\n        bActive, period;\n    this._clearTimeout();\n    if (action) {\n        if (typeof action === \"function\") {\n            this.actionResult = bPassToAction\n                ? action(this)\n                : action();\n        }\n        else if (typeof action.execute === \"function\") {\n            this.actionResult = bPassToAction\n                ? action.execute(this)\n                : action.execute();\n        }\n    }\n    if (typeof this.onExecute === \"function\") {\n        this.onExecuteResult = bPassToAction\n            ? this.onExecute(this)\n            : this.onExecute();\n    }\n    this._executionQty++;\n    this._executeTime.push( new Date().getTime() );\n    bActive = this.isActive();\n    if (bActive\n            && (this.isRecurrent()\n                    || this.getRepeatQty() >= this._executionQty\n                    || (repeatTest\n                        && ( (period = repeatTest(this)) || period === 0 )\n                        && (typeof period !== \"number\" || period >= 0))\n                ) ) {\n        this._setTimeout(period);\n    }\n    else if (bActive && ! this._timeoutId) {\n        this.setActive(false);\n    }\n    return this;\n};\n\n/**\n * Free resources that are allocated for object.\n *\n * @method\n */\nTimer.prototype.dispose = function() {\n    \"use strict\";\n    this._clearTimeout();\n    this._action =\n        this.actionResult =\n        this._data =\n        this._executeTime =\n        this._period =\n        this._repeatTest =\n        this.onExecute =\n        this.onExecuteResult =\n            null;\n};\n\n/**\n * Convert object into string.\n *\n * @method\n */\nTimer.prototype.toString = function() {\n    \"use strict\";\n    /*jshint laxbreak:true*/\n    var period = this.getPeriod(),\n        startTime = this.getStartTime(),\n        stopTime = this.getStopTime(),\n        executeTime = this.getExecuteTime(),\n        nL = executeTime.length,\n        execTime = \"\",\n        nI;\n    if (nL) {\n        for (nI = 0; nI < nL; nI++) {\n            execTime += (nI ? \"; \" : \"\") + new Date( executeTime[nI] );\n        }\n    }\n    return [\n            \"Timer: \",\n            \"active - \", this.isActive(),\n            \", period - \", typeof period === \"function\" ? \"function\" : period,\n            \", recurrent - \", this.isRecurrent(),\n            \", repeat qty - \", this.getRepeatQty(),\n            \", repeat test - \", (this.getRepeatTest() ? \"specified\" : \"no\"),\n            \", pass to action - \", this.isPassToAction(),\n            \", action - \", (this.getAction() ? \"specified\" : \"no\"),\n            \", execution qty - \", this.getExecutionQty(),\n            typeof startTime === \"number\" \n                ? \", start time - \" + new Date(startTime)\n                : \"\",\n            execTime\n                ? \", execute time - \" + execTime\n                : \"\",\n            typeof stopTime === \"number\"\n                ? \", stop time - \" + new Date(stopTime)\n                : \"\",\n            \", action result - \", this.actionResult,\n            \", onExecuteResult - \", this.onExecuteResult,\n            \", data - \", this.getData()\n            ].join(\"\");\n};\n\n// Exports\n\nexport default Timer;\n"]}