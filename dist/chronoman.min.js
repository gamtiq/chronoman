!function(a,b){if("object"==typeof exports)module.exports=b(require,exports,module);else if("function"==typeof define&&define.amd)define(["require","exports","module"],b);else{var c=function(b){return a[b]},d=a,e={exports:d};a.Chronoman=b(c,d,e)}}(this,function(a,b,c){var d=function(a){var b=this;this._onTimeoutEnd=function(){b._timeoutId=null,b.execute()},a&&"object"==typeof a&&("action"in a&&this.setAction(a.action),"period"in a&&this.setPeriod(a.period),"recurrent"in a&&this.setRecurrent(a.recurrent),"repeatQty"in a&&this.setRepeatQty(a.repeatQty),"repeatTest"in a&&this.setRepeatTest(a.repeatTest),"active"in a&&this.setActive(a.active),"passToAction"in a&&this.setPassToAction(a.passToAction))};return d.prototype._period=null,d.prototype.getPeriod=function(){return this._period},d.prototype.setPeriod=function(a){return this._period=a,this},d.prototype._recurrent=!1,d.prototype.isRecurrent=function(){return this._recurrent},d.prototype.setRecurrent=function(a){return this._recurrent=a,this},d.prototype._repeatQty=0,d.prototype.getRepeatQty=function(){return this._repeatQty},d.prototype.setRepeatQty=function(a){return this._repeatQty=a,this},d.prototype._repeatTest=null,d.prototype.getRepeatTest=function(){return this._repeatTest},d.prototype.setRepeatTest=function(a){return this._repeatTest=a,this},d.prototype._executionQty=0,d.prototype.getExecutionQty=function(){return this._executionQty},d.prototype._timeoutId=null,d.prototype._setTimeout=function(){"use strict";var a=this.getPeriod();return"number"==typeof a&&(this._timeoutId=setTimeout(this._onTimeoutEnd,a)),this},d.prototype._clearTimeout=function(){"use strict";return this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),this},d.prototype._active=!1,d.prototype.isActive=function(){return this._active},d.prototype.setActive=function(a){"use strict";return a&&!this._active&&(this._executionQty=0),this._active=a,this._clearTimeout(),a&&this._setTimeout(),this},d.prototype.start=function(a){"use strict";return"number"==typeof a&&this.setPeriod(a),this.setActive(!0)},d.prototype.stop=function(){return this.setActive(!1)},d.prototype._action=null,d.prototype.getAction=function(){return this._action},d.prototype.setAction=function(a){return this._action=a,this},d.prototype._passToAction=!1,d.prototype.isPassToAction=function(){return this._passToAction},d.prototype.setPassToAction=function(a){return this._passToAction=a,this},d.prototype.onExecute=null,d.prototype.execute=function(){"use strict";var a,b=this.getAction(),c=this.isPassToAction(),d=this.getRepeatTest();return this._clearTimeout(),b&&(c?b(this):b()),"function"==typeof this.onExecute&&(c?this.onExecute(this):this.onExecute()),this._executionQty++,a=this.isActive(),a&&(this.isRecurrent()||this.getRepeatQty()>=this._executionQty||d&&d(this))?this._setTimeout():a&&(this._active=!1),this},d.prototype.dispose=function(){"use strict";this._clearTimeout(),this._action=this._repeatTest=this.onExecute=null},d.prototype.toString=function(){"use strict";return["Timer: ","active - ",this.isActive(),", period - ",this.getPeriod(),", recurrent - ",this.isRecurrent(),", repeat qty - ",this.getRepeatQty(),", repeat test - ",this.getRepeatTest()?"specified":"no",", pass to action - ",this.isPassToAction(),", action - ",this.getAction()?"specified":"no"].join("")},c.exports=d,d});