!function(e,t){if(void 0===e&&void 0!==window&&(e=window),"object"==typeof module&&module.exports)module.exports=t(require,exports,module);else if("function"==typeof define&&define.amd)define(["require","exports","module"],t);else{var i=e,o={exports:i};e.Chronoman=t(function(t){return e[t]},i,o)}}(this,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){var e=this;this._onTimeoutEnd=function(){e._timeoutId=null,e.execute()},t&&"object"===(void 0===t?"undefined":o(t))&&this.setProperties(t)};return n.prototype._period=null,n.prototype.getPeriod=function(){return this._period},n.prototype.setPeriod=function(t){return this._period=t,this},n.prototype._recurrent=!1,n.prototype.isRecurrent=function(){return this._recurrent},n.prototype.setRecurrent=function(t){return this._recurrent=t,this},n.prototype._repeatQty=0,n.prototype.getRepeatQty=function(){return this._repeatQty},n.prototype.setRepeatQty=function(t){return this._repeatQty=t,this},n.prototype._repeatTest=null,n.prototype.getRepeatTest=function(){return this._repeatTest},n.prototype.setRepeatTest=function(t){return this._repeatTest=t,this},n.prototype._executionQty=0,n.prototype.getExecutionQty=function(){return this._executionQty},n.prototype._timeoutId=null,n.prototype._setTimeout=function(){var t=this.getPeriod();return"number"==typeof t&&(this._timeoutId=setTimeout(this._onTimeoutEnd,t)),this},n.prototype._clearTimeout=function(){return this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),this},n.prototype._active=!1,n.prototype.isActive=function(){return this._active},n.prototype.setActive=function(t){return t&&!this._active&&(this._executionQty=0),this._active=t,this._clearTimeout(),t&&this._setTimeout(),this},n.prototype.start=function(t){return"number"==typeof t?this.setPeriod(t):t&&"object"===(void 0===t?"undefined":o(t))&&this.setProperties(t),this.setActive(!0)},n.prototype.stop=function(){return this.setActive(!1)},n.prototype._action=null,n.prototype.getAction=function(){return this._action},n.prototype.setAction=function(t){return this._action=t,this},n.prototype._passToAction=!1,n.prototype.isPassToAction=function(){return this._passToAction},n.prototype.setPassToAction=function(t){return this._passToAction=t,this},n.prototype.setProperties=function(t){return t&&"object"===(void 0===t?"undefined":o(t))&&("action"in t&&this.setAction(t.action),"period"in t&&this.setPeriod(t.period),"recurrent"in t&&this.setRecurrent(t.recurrent),"repeatQty"in t&&this.setRepeatQty(t.repeatQty),"repeatTest"in t&&this.setRepeatTest(t.repeatTest),"active"in t&&this.setActive(t.active),"passToAction"in t&&this.setPassToAction(t.passToAction)),this},n.prototype.onExecute=null,n.prototype.execute=function(){var t,e=this.getAction(),i=this.isPassToAction(),o=this.getRepeatTest();return this._clearTimeout(),e&&(i?e(this):e()),"function"==typeof this.onExecute&&(i?this.onExecute(this):this.onExecute()),this._executionQty++,(t=this.isActive())&&(this.isRecurrent()||this.getRepeatQty()>=this._executionQty||o&&o(this))?this._setTimeout():t&&!this._timeoutId&&(this._active=!1),this},n.prototype.dispose=function(){this._clearTimeout(),this._action=this._repeatTest=this.onExecute=null},n.prototype.toString=function(){return["Timer: ","active - ",this.isActive(),", period - ",this.getPeriod(),", recurrent - ",this.isRecurrent(),", repeat qty - ",this.getRepeatQty(),", repeat test - ",this.getRepeatTest()?"specified":"no",", pass to action - ",this.isPassToAction(),", action - ",this.getAction()?"specified":"no",", execution qty - ",this.getExecutionQty()].join("")},e.default=n,i.exports=e.default,n});