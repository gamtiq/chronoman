!function(a,b){if("object"==typeof exports)module.exports=b(require,exports,module);else if("function"==typeof define&&define.amd)define(["require","exports","module"],b);else{var c=function(b){return a[b]},d=a,e={exports:d};a.Chronoman=b(c,d,e)}}(this,function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},e=function(a){var b=this;this._onTimeoutEnd=function(){b._timeoutId=null,b.execute()},a&&"object"===("undefined"==typeof a?"undefined":d(a))&&this.setProperties(a)};return e.prototype._period=null,e.prototype.getPeriod=function(){return this._period},e.prototype.setPeriod=function(a){return this._period=a,this},e.prototype._recurrent=!1,e.prototype.isRecurrent=function(){return this._recurrent},e.prototype.setRecurrent=function(a){return this._recurrent=a,this},e.prototype._repeatQty=0,e.prototype.getRepeatQty=function(){return this._repeatQty},e.prototype.setRepeatQty=function(a){return this._repeatQty=a,this},e.prototype._repeatTest=null,e.prototype.getRepeatTest=function(){return this._repeatTest},e.prototype.setRepeatTest=function(a){return this._repeatTest=a,this},e.prototype._executionQty=0,e.prototype.getExecutionQty=function(){return this._executionQty},e.prototype._timeoutId=null,e.prototype._setTimeout=function(){var a=this.getPeriod();return"number"==typeof a&&(this._timeoutId=setTimeout(this._onTimeoutEnd,a)),this},e.prototype._clearTimeout=function(){return this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null),this},e.prototype._active=!1,e.prototype.isActive=function(){return this._active},e.prototype.setActive=function(a){return a&&!this._active&&(this._executionQty=0),this._active=a,this._clearTimeout(),a&&this._setTimeout(),this},e.prototype.start=function(a){return"number"==typeof a?this.setPeriod(a):a&&"object"===("undefined"==typeof a?"undefined":d(a))&&this.setProperties(a),this.setActive(!0)},e.prototype.stop=function(){return this.setActive(!1)},e.prototype._action=null,e.prototype.getAction=function(){return this._action},e.prototype.setAction=function(a){return this._action=a,this},e.prototype._passToAction=!1,e.prototype.isPassToAction=function(){return this._passToAction},e.prototype.setPassToAction=function(a){return this._passToAction=a,this},e.prototype.setProperties=function(a){return a&&"object"===("undefined"==typeof a?"undefined":d(a))&&("action"in a&&this.setAction(a.action),"period"in a&&this.setPeriod(a.period),"recurrent"in a&&this.setRecurrent(a.recurrent),"repeatQty"in a&&this.setRepeatQty(a.repeatQty),"repeatTest"in a&&this.setRepeatTest(a.repeatTest),"active"in a&&this.setActive(a.active),"passToAction"in a&&this.setPassToAction(a.passToAction)),this},e.prototype.onExecute=null,e.prototype.execute=function(){var a,b=this.getAction(),c=this.isPassToAction(),d=this.getRepeatTest();return this._clearTimeout(),b&&(c?b(this):b()),"function"==typeof this.onExecute&&(c?this.onExecute(this):this.onExecute()),this._executionQty++,a=this.isActive(),a&&(this.isRecurrent()||this.getRepeatQty()>=this._executionQty||d&&d(this))?this._setTimeout():a&&!this._timeoutId&&(this._active=!1),this},e.prototype.dispose=function(){this._clearTimeout(),this._action=this._repeatTest=this.onExecute=null},e.prototype.toString=function(){return["Timer: ","active - ",this.isActive(),", period - ",this.getPeriod(),", recurrent - ",this.isRecurrent(),", repeat qty - ",this.getRepeatQty(),", repeat test - ",this.getRepeatTest()?"specified":"no",", pass to action - ",this.isPassToAction(),", action - ",this.getAction()?"specified":"no",", execution qty - ",this.getExecutionQty()].join("")},b["default"]=e,c.exports=b["default"],e});